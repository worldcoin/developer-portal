actions:
  - name: invite_team_members
    definition:
      kind: synchronous
      handler: '{{NEXT_API_URL}}/_invite_team_members'
      headers:
        - name: Authorization
          value_from_env: INTERNAL_ENDPOINTS_SECRET
    permissions:
      - role: user
    comment: Create invites and send emails
  - name: reset_api_key
    definition:
      kind: synchronous
      handler: '{{NEXT_API_URL}}/_reset-api-key'
      headers:
        - name: Authorization
          value_from_env: INTERNAL_ENDPOINTS_SECRET
    permissions:
      - role: user
    comment: Reset the given API key for the developer portal
  - name: reset_client_secret
    definition:
      kind: synchronous
      handler: '{{NEXT_API_URL}}/_reset-client-secret'
      headers:
        - name: Authorization
          value_from_env: INTERNAL_ENDPOINTS_SECRET
    permissions:
      - role: api_key
      - role: user
    comment: Reset the client secret for a Sign in with World ID application
  - name: upload_image
    definition:
      kind: ""
      handler: '{{NEXT_API_URL}}/images/upload_image'
      headers:
        - name: Authorization
          value_from_env: INTERNAL_ENDPOINTS_SECRET
      request_transform:
        method: GET
        query_params:
          app_id: '{{$body.input.app_id}}'
          content_type_ending: '{{$body.input.content_type_ending}}'
          image_type: '{{$body.input.image_type}}'
        request_headers:
          add_headers: {}
          remove_headers:
            - content-type
        template_engine: Kriti
        version: 2
    permissions:
      - role: api_key
      - role: user
    comment: Generates a Signed URL to upload images
custom_types:
  enums: []
  input_objects:
    - name: UploadImageInput
  objects:
    - name: ResetClientOutput
    - name: ResetAPIOutput
    - name: InviteTeamMembersOutput
    - name: PresignedPost
    - name: FormField
  scalars: []
