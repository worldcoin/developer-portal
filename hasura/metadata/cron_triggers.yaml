- name: Cleanup notification logs
  webhook: '{{NEXT_API_URL}}/delete-expired-notification-logs'
  schedule: '*/15 * * * *'
  include_in_metadata: true
  payload: {}
  retry_conf:
    num_retries: 1
    retry_interval_seconds: 10
    timeout_seconds: 60
    tolerance_seconds: 21600
  headers:
    - name: Authorization
      value_from_env: INTERNAL_ENDPOINTS_SECRET
  comment: Delete notification logs that are at least 4 weeks old. Also deletes the corresponding notification_log_wallet_addresses
- name: Delete expired auth codes
  webhook: '{{NEXT_API_URL}}/_delete-expired-auth-codes'
  schedule: 0 * * * *
  include_in_metadata: true
  payload: {}
  retry_conf:
    num_retries: 1
    retry_interval_seconds: 10
    timeout_seconds: 60
    tolerance_seconds: 21600
  headers:
    - name: Authorization
      value_from_env: INTERNAL_ENDPOINTS_SECRET
  comment: ""
- name: Rollup app stats
  webhook: '{{NEXT_API_URL}}/_rollup-app-stats'
  schedule: 0 * * * *
  include_in_metadata: true
  payload: {}
  retry_conf:
    num_retries: 5
    retry_interval_seconds: 10
    timeout_seconds: 60
    tolerance_seconds: 21600
  headers:
    - name: Authorization
      value_from_env: INTERNAL_ENDPOINTS_SECRET
  comment: Update the app stats table with the latest increment of nullifier data
