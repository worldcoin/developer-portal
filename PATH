import { createMocks } from 'node-mocks-http';
import deleteAccountHandler from '../../../api/auth/[auth0]/delete-account/index';

describe('/api/auth/delete-account endpoint', () => {
  test('deletes user account successfully', async () => {
    const { req, res } = createMocks({
      method: 'DELETE',
    });

    await deleteAccountHandler(req, res);

    expect(res._getStatusCode()).toBe(200);
    expect(JSON.parse(res._getData())).toEqual(expect.objectContaining({
      message: 'Account deleted successfully',
    }));
  });

  // Additional tests can be added here to cover other scenarios,
  // such as unsuccessful deletion due to unauthorized requests,
  // missing user data, etc.
});

