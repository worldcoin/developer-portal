# Separate V2 mutation for cleaner schema evolution and easier maintenance.
# Allows independent changes to V2 flow without affecting original app creation flow.
# Uses same underlying insert_app_one operation but with explicit V2 contract.
mutation InsertAppV2(
  $name: String!
  $engine: String!
  $is_staging: Boolean!
  $team_id: String!
  $category: String
  $integration_url: String!
  $app_mode: String!
) {
  insert_app_one(
    object: {
      engine: $engine
      app_metadata: {
        data: {
          name: $name
          integration_url: $integration_url
          app_mode: $app_mode
          category: $category
        }
      }
      name: $name
      is_staging: $is_staging
      team_id: $team_id
    }
  ) {
    id
  }
}
